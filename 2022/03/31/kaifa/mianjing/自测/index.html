<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="整理答题思路 这里暂时只放最最基本的面试题，汇总在这里，面试前看看，别最基础的也忘了。 Java，并发，Mysql，Redis，消息队列（Kafka）、网络  Java 中的集合类型？哪些是线程安全的？List、Set、Map ConcurrentHashMap线程安全 hashmap 的底层实现原理、put()方法实现流程、扩容机制？和Redis区别底层实现原理就不赘述了，关键词记一下，别忘了">
<meta property="og:type" content="article">
<meta property="og:title" content="【1开发】【八股】面经自测">
<meta property="og:url" content="http://example.com/2022/03/31/kaifa/mianjing/%E8%87%AA%E6%B5%8B/index.html">
<meta property="og:site_name" content="czh的学习小站">
<meta property="og:description" content="整理答题思路 这里暂时只放最最基本的面试题，汇总在这里，面试前看看，别最基础的也忘了。 Java，并发，Mysql，Redis，消息队列（Kafka）、网络  Java 中的集合类型？哪些是线程安全的？List、Set、Map ConcurrentHashMap线程安全 hashmap 的底层实现原理、put()方法实现流程、扩容机制？和Redis区别底层实现原理就不赘述了，关键词记一下，别忘了">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-03-31T11:01:35.000Z">
<meta property="article:modified_time" content="2022-03-31T11:01:35.000Z">
<meta property="article:author" content="蔡正海">
<meta property="article:tag" content="开发">
<meta property="article:tag" content="八股">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2022/03/31/kaifa/mianjing/%E8%87%AA%E6%B5%8B/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2022/03/31/kaifa/mianjing/%E8%87%AA%E6%B5%8B/","path":"2022/03/31/kaifa/mianjing/自测/","title":"【1开发】【八股】面经自测"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>【1开发】【八股】面经自测 | czh的学习小站</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">czh的学习小站</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">自律</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B4%E7%90%86%E7%AD%94%E9%A2%98%E6%80%9D%E8%B7%AF"><span class="nav-number">1.</span> <span class="nav-text">整理答题思路</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-%E4%B8%AD%E7%9A%84%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%EF%BC%9F%E5%93%AA%E4%BA%9B%E6%98%AF%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%EF%BC%9F"><span class="nav-number">1.0.1.</span> <span class="nav-text">Java 中的集合类型？哪些是线程安全的？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashmap-%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E3%80%81put-%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E6%B5%81%E7%A8%8B%E3%80%81%E6%89%A9%E5%AE%B9%E6%9C%BA%E5%88%B6%EF%BC%9F%E5%92%8CRedis%E5%8C%BA%E5%88%AB"><span class="nav-number">1.0.2.</span> <span class="nav-text">hashmap 的底层实现原理、put()方法实现流程、扩容机制？和Redis区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HashMap-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E5%AE%89%E5%85%A8%EF%BC%8CConcurrentHashMap"><span class="nav-number">1.0.3.</span> <span class="nav-text">HashMap 为什么不安全，ConcurrentHashMap</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.0.4.</span> <span class="nav-text">进程和线程的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%92%8C%E7%8A%B6%E6%80%81%EF%BC%9F"><span class="nav-number">1.0.5.</span> <span class="nav-text">线程的生命周期和状态？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sleep-%E5%92%8C-wait-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.0.6.</span> <span class="nav-text">sleep 和 wait 的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ThreadLocal%E4%B8%8ESynchronized%E5%8C%BA%E5%88%AB"><span class="nav-number">1.0.7.</span> <span class="nav-text">ThreadLocal与Synchronized区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ThreadLocal-%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%9F%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8"><span class="nav-number">1.0.8.</span> <span class="nav-text">ThreadLocal 的实现原理？线程安全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88JMM%EF%BC%89"><span class="nav-number">1.0.9.</span> <span class="nav-text">Java 内存模型（JMM）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Volitile"><span class="nav-number">1.0.10.</span> <span class="nav-text">Volitile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#synchronized%E5%92%8Cvolatile%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.0.11.</span> <span class="nav-text">synchronized和volatile的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#synchronized%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%9F%E5%8F%AF%E9%87%8D%E5%85%A5%EF%BC%9F%E9%94%81%E5%8D%87%E7%BA%A7%EF%BC%9F"><span class="nav-number">1.0.12.</span> <span class="nav-text">synchronized实现原理？可重入？锁升级？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ReentrantLock%E5%92%8CSynchronized%E5%8C%BA%E5%88%AB"><span class="nav-number">1.0.13.</span> <span class="nav-text">ReentrantLock和Synchronized区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CAS%E5%92%8CABA"><span class="nav-number">1.0.14.</span> <span class="nav-text">CAS和ABA</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0"><span class="nav-number">1.1.</span> <span class="nav-text">线程池</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="nav-number">1.1.1.</span> <span class="nav-text">线程池工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0CompletableFuture"><span class="nav-number">1.1.2.</span> <span class="nav-text">线程池CompletableFuture</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%EF%BC%88Innodb%EF%BC%8CMyISAM%EF%BC%89"><span class="nav-number">1.1.3.</span> <span class="nav-text">MySQL存储引擎（Innodb，MyISAM）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E5%A4%A7%E6%97%A5%E5%BF%97"><span class="nav-number">1.1.4.</span> <span class="nav-text">三大日志</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5%E7%9A%84%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4"><span class="nav-number">1.1.5.</span> <span class="nav-text">更新语句的两阶段提交</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL%E6%89%A7%E8%A1%8C%E4%B8%80%E6%9D%A1SQL%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="nav-number">1.1.6.</span> <span class="nav-text">MySQL执行一条SQL语句的流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%BD%8D%E6%85%A2SQL"><span class="nav-number">1.1.7.</span> <span class="nav-text">定位慢SQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL%E7%B4%A2%E5%BC%95%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="nav-number">1.1.8.</span> <span class="nav-text">MySQL索引有哪些</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95"><span class="nav-number">1.1.9.</span> <span class="nav-text">雪花算法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL%E5%8A%A0%E7%B4%A2%E5%BC%95%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E4%BA%9B%E4%BB%80%E4%B9%88"><span class="nav-number">1.1.10.</span> <span class="nav-text">MySQL加索引需要注意些什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E7%9A%84%E6%83%85%E5%86%B5"><span class="nav-number">1.1.11.</span> <span class="nav-text">索引失效的情况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%A8B-%E6%A0%91"><span class="nav-number">1.1.12.</span> <span class="nav-text">MySQL为什么用B+树</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL%E6%9C%89%E5%93%AA%E4%BA%9B%E9%94%81"><span class="nav-number">1.1.13.</span> <span class="nav-text">MySQL有哪些锁</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E4%B8%AA%E7%89%B9%E6%80%A7"><span class="nav-number">1.1.14.</span> <span class="nav-text">MySQL事务的四个特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">1.1.15.</span> <span class="nav-text">MySQL事务的隔离级别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL%E4%BA%8B%E5%8A%A1%E4%B8%ADMVCC%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.1.16.</span> <span class="nav-text">MySQL事务中MVCC的实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8"><span class="nav-number">1.1.17.</span> <span class="nav-text">分库分表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E5%81%9C%E6%9C%BA%E6%89%A9%E5%AE%B9"><span class="nav-number">1.1.18.</span> <span class="nav-text">不停机扩容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis%E7%94%A8%E6%9D%A5%E5%B9%B2%E5%98%9B"><span class="nav-number">1.1.19.</span> <span class="nav-text">Redis用来干嘛</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97%E5%92%8C%E5%BB%B6%E6%97%B6%E9%98%9F%E5%88%97%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.1.20.</span> <span class="nav-text">阻塞队列和延时队列的实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis%E4%B8%AD%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.21.</span> <span class="nav-text">Redis中的常用命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%AB"><span class="nav-number">1.1.22.</span> <span class="nav-text">Redis为什么快</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis-%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E6%96%B9%E5%BC%8F%EF%BC%9FRDB-%E5%92%8C-AOF-%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9FRedis-%E5%AE%95%E6%9C%BA%E5%93%AA%E7%A7%8D%E6%81%A2%E5%A4%8D%E7%9A%84%E6%AF%94%E8%BE%83%E5%BF%AB%EF%BC%9F"><span class="nav-number">1.1.23.</span> <span class="nav-text">Redis 的持久化方式？RDB 和 AOF 的区别？Redis 宕机哪种恢复的比较快？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E3%80%81%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9"><span class="nav-number">1.1.24.</span> <span class="nav-text">什么是缓存击穿、缓存穿透、缓存雪崩</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7"><span class="nav-number">1.1.25.</span> <span class="nav-text">如何保证数据的一致性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86Redis%E4%B8%AD%E7%9A%84%E7%83%ADKey%E5%92%8C%E5%A4%A7Key"><span class="nav-number">1.1.26.</span> <span class="nav-text">怎么处理Redis中的热Key和大Key</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%EF%BC%8C%E5%93%A8%E5%85%B5%EF%BC%8C%E9%9B%86%E7%BE%A4"><span class="nav-number">1.1.27.</span> <span class="nav-text">Redis主从复制，哨兵，集群</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E4%B8%89%E4%B8%AA%E5%A5%BD%E5%A4%84"><span class="nav-number">1.1.28.</span> <span class="nav-text">消息队列的三个好处</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9Kafka%EF%BC%88send%EF%BC%8CKafkaListener%EF%BC%89"><span class="nav-number">1.1.29.</span> <span class="nav-text">为什么选择Kafka（send，KafkaListener）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%9D%E8%AF%81Kafka%E7%9A%84%E6%B6%88%E8%B4%B9%E9%A1%BA%E5%BA%8F"><span class="nav-number">1.1.30.</span> <span class="nav-text">保证Kafka的消费顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%9D%E8%AF%81Kafka%E7%9A%84%E6%B6%88%E6%81%AF%E4%B8%8D%E4%B8%A2%E5%A4%B1"><span class="nav-number">1.1.31.</span> <span class="nav-text">保证Kafka的消息不丢失</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Kafka%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E9%87%8D%E5%A4%8D%E6%B6%88%E8%B4%B9"><span class="nav-number">1.1.32.</span> <span class="nav-text">Kafka如何保证消息不重复消费</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B"><span class="nav-number">1.1.33.</span> <span class="nav-text">网络模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5HTTP%E6%B5%81%E7%A8%8B"><span class="nav-number">1.1.34.</span> <span class="nav-text">输入HTTP流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E8%AF%B4DNS%E7%9A%84%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B"><span class="nav-number">1.1.35.</span> <span class="nav-text">说说DNS的解析过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP1-0-1-1-2-0-3-0"><span class="nav-number">1.1.36.</span> <span class="nav-text">HTTP1.0  1.1  2.0 3.0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP%E5%92%8CHTTPS"><span class="nav-number">1.1.37.</span> <span class="nav-text">HTTP和HTTPS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%EF%BC%8C%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="nav-number">1.1.38.</span> <span class="nav-text">TCP三次握手，四次挥手</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A0%86%E5%92%8C%E6%A0%88"><span class="nav-number">1.1.39.</span> <span class="nav-text">堆和栈</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">1.1.40.</span> <span class="nav-text"></span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="蔡正海"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">蔡正海</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">47</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/31/kaifa/mianjing/%E8%87%AA%E6%B5%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="蔡正海">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="czh的学习小站">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="【1开发】【八股】面经自测 | czh的学习小站">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【1开发】【八股】面经自测
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E5%85%AB%E8%82%A1/" itemprop="url" rel="index"><span itemprop="name">八股</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="整理答题思路"><a href="#整理答题思路" class="headerlink" title="整理答题思路"></a>整理答题思路</h1><blockquote>
<p>这里暂时只放最最基本的面试题，汇总在这里，面试前看看，别最基础的也忘了。</p>
<p>Java，并发，Mysql，Redis，消息队列（Kafka）、网络</p>
</blockquote>
<h3 id="Java-中的集合类型？哪些是线程安全的？"><a href="#Java-中的集合类型？哪些是线程安全的？" class="headerlink" title="Java 中的集合类型？哪些是线程安全的？"></a>Java 中的集合类型？哪些是线程安全的？</h3><p>List、Set、Map</p>
<p>ConcurrentHashMap线程安全</p>
<h3 id="hashmap-的底层实现原理、put-方法实现流程、扩容机制？和Redis区别"><a href="#hashmap-的底层实现原理、put-方法实现流程、扩容机制？和Redis区别" class="headerlink" title="hashmap 的底层实现原理、put()方法实现流程、扩容机制？和Redis区别"></a>hashmap 的底层实现原理、put()方法实现流程、扩容机制？和Redis区别</h3><p>底层实现原理就不赘述了，关键词记一下，别忘了</p>
<ul>
<li><p><strong>结构：</strong></p>
<ul>
<li>桶数组，链表、红黑树</li>
<li>hashcode()高16位和低16位异或，</li>
</ul>
</li>
<li><p><strong>put：</strong></p>
<ul>
<li>覆盖？链表尾差&#x2F;红黑树？（是否需要树话，是否需要扩容）</li>
</ul>
</li>
<li><p><strong>扩容：</strong></p>
<ul>
<li>2^n次方，0.75，8，64</li>
</ul>
</li>
</ul>
<p>和Redis区别，<strong>一个分布式，一个单机</strong></p>
<h3 id="HashMap-为什么不安全，ConcurrentHashMap"><a href="#HashMap-为什么不安全，ConcurrentHashMap" class="headerlink" title="HashMap 为什么不安全，ConcurrentHashMap"></a>HashMap 为什么不安全，ConcurrentHashMap</h3><p>当然不安全</p>
<ul>
<li>两个<strong>同时put</strong>，应该用链表的，会被覆盖</li>
<li><strong>get和put</strong>同时，这时候rehash了，就get null了</li>
</ul>
<p>ConcurrentHashMap原理（<strong>synchronized</strong>锁桶数组上的节点）（<strong>自旋+CAS</strong>避免不必要的锁）</p>
<ul>
<li>CAS+自旋 初始化数组</li>
<li>CAS （散列到的节点是空，CAS写入）</li>
<li>CAS+synchronized （进行扩容）</li>
<li>synchronized（正常写入数据）</li>
</ul>
<h3 id="进程和线程的区别"><a href="#进程和线程的区别" class="headerlink" title="进程和线程的区别"></a>进程和线程的区别</h3><ul>
<li>进程（JVM进程）<ul>
<li>多核CPU，同时刻</li>
</ul>
</li>
<li>线程<ul>
<li>多个子任务通过事件片轮转，不同时刻</li>
<li>Java虚拟机：<ul>
<li>共享资源：堆、方法区</li>
<li>线程：程序计数器、栈</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="线程的生命周期和状态？"><a href="#线程的生命周期和状态？" class="headerlink" title="线程的生命周期和状态？"></a>线程的生命周期和状态？</h3><p><strong>6个状态</strong></p>
<ul>
<li>正常：<ul>
<li>new，run，terminate</li>
</ul>
</li>
<li>wait、sleep、lock</li>
</ul>
<h3 id="sleep-和-wait-的区别"><a href="#sleep-和-wait-的区别" class="headerlink" title="sleep 和 wait 的区别"></a>sleep 和 wait 的区别</h3><p>sleep：线程，不释放锁</p>
<p>wait：对象，释放锁</p>
<h3 id="ThreadLocal与Synchronized区别"><a href="#ThreadLocal与Synchronized区别" class="headerlink" title="ThreadLocal与Synchronized区别"></a>ThreadLocal与Synchronized区别</h3><p>线程副本；加锁</p>
<p>空间换时间；时间换空间</p>
<p>Synchronized失去了并发性。</p>
<h3 id="ThreadLocal-的实现原理？线程安全"><a href="#ThreadLocal-的实现原理？线程安全" class="headerlink" title="ThreadLocal 的实现原理？线程安全"></a>ThreadLocal 的实现原理？线程安全</h3><ul>
<li>ThreadLocalMap：弱引用（ThreadLocal），强引用（局部变量本身）</li>
<li>斐波那契散列，开放定址法，扩容（先清理，再判断是否需要扩容）</li>
<li>线程不安全，弱引用没了，强引用还在。记得remove</li>
</ul>
<h3 id="Java-内存模型（JMM）"><a href="#Java-内存模型（JMM）" class="headerlink" title="Java 内存模型（JMM）"></a>Java 内存模型（JMM）</h3><p>抽象模型，主存与本地内存</p>
<p>并发问题：可见性（volitile），原子性（synchronized），有序性（volitile）</p>
<p>指令重排，happens-before</p>
<h3 id="Volitile"><a href="#Volitile" class="headerlink" title="Volitile"></a>Volitile</h3><p><strong>可见性</strong>：读写屏障</p>
<p><strong>有序性</strong>：禁止指令重排</p>
<h3 id="synchronized和volatile的区别"><a href="#synchronized和volatile的区别" class="headerlink" title="synchronized和volatile的区别"></a>synchronized和volatile的区别</h3><p>代码块，方法，类（原子）</p>
<p>有序性（volatile）</p>
<h3 id="synchronized实现原理？可重入？锁升级？"><a href="#synchronized实现原理？可重入？锁升级？" class="headerlink" title="synchronized实现原理？可重入？锁升级？"></a>synchronized实现原理？可重入？锁升级？</h3><p><strong>实现原理（可重入）</strong></p>
<ul>
<li>ObjectMonitor：CAS获取Owner，_recursions ++（可重入的），_EntryList</li>
</ul>
<p><strong>锁升级</strong></p>
<ul>
<li><p>对象头的Mark Word</p>
</li>
<li><p>无锁，偏向锁（长时间同一线程获取锁），轻量锁（锁在不同时刻，不涉及上下文切换），重量锁（）</p>
</li>
<li><p>流程</p>
<ul>
<li>偏向锁（记下这个线程ID）</li>
<li>—-（CAS修改线程ID失败）—-&gt; 轻量锁</li>
<li>—-（自旋获取锁，避免立即进入阻塞）—–&gt;  重量级锁</li>
</ul>
</li>
</ul>
<h3 id="ReentrantLock和Synchronized区别"><a href="#ReentrantLock和Synchronized区别" class="headerlink" title="ReentrantLock和Synchronized区别"></a>ReentrantLock和Synchronized区别</h3><ul>
<li>公平锁（FIFO）和非公平锁；非公平锁</li>
<li>AQS；底层</li>
</ul>
<h3 id="CAS和ABA"><a href="#CAS和ABA" class="headerlink" title="CAS和ABA"></a>CAS和ABA</h3><p>乐观锁（相比之下synchronized是悲观锁）</p>
<p>A改为B，又改为A，CAS操作线程<strong>无法知晓该位置的值已经被修改过</strong>了（<strong>改进：通过版本号</strong>）</p>
<h2 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h2><ul>
<li><p>好处</p>
<ul>
<li><strong>降低资源消耗</strong>：重复利用已创建的线程</li>
<li><strong>提高响应速度</strong>：任务到达时，无需等待线程创建</li>
<li><strong>提高线程的可管理性</strong>：线程是稀缺资源，防止无限制地创建线程，造成大量的线程上下文切换</li>
</ul>
</li>
<li><p>应用（大营销）</p>
<ul>
<li>项目背景：抽奖是高并发的，需要快速响应用户请求，（聚合查询奖品信息；定时任务更新库存）</li>
<li>核心线程数：cpu核的两倍，即云服务器4核 * 2&#x3D;8（有很多网络通信，数据库操作，所以是IO密集性任务，有较多的空闲线程）</li>
<li>最大线程数：8 * 2 &#x3D;16 </li>
<li>阻塞队列：SynchronousQueue（提交后立即交给等待的线程处理，提高响应速度）</li>
<li>拒绝策略：CallerRunsPolicy（由调用线程来执行该任务，保证了任务能成功执行）</li>
</ul>
</li>
</ul>
<h3 id="线程池工作流程"><a href="#线程池工作流程" class="headerlink" title="线程池工作流程"></a>线程池工作流程</h3><p>核心线程—&gt; 任务队列 —&gt; 核心队列 —&gt;拒绝策略</p>
<ul>
<li>用start：run， start</li>
<li>是否需要返回值：execute，submit</li>
</ul>
<h3 id="线程池CompletableFuture"><a href="#线程池CompletableFuture" class="headerlink" title="线程池CompletableFuture"></a>线程池CompletableFuture</h3><ul>
<li>添加任务：runAsync（参数：runnable，线程池）</li>
<li>编排：thenCombine，thenAccept</li>
<li>等待所有任务执行完毕：allof().join()</li>
</ul>
<h3 id="MySQL存储引擎（Innodb，MyISAM）"><a href="#MySQL存储引擎（Innodb，MyISAM）" class="headerlink" title="MySQL存储引擎（Innodb，MyISAM）"></a>MySQL存储引擎（Innodb，MyISAM）</h3><p>选Innodb（事务，行级锁，redo Log和Undo Log）</p>
<h3 id="三大日志"><a href="#三大日志" class="headerlink" title="三大日志"></a>三大日志</h3><ul>
<li>binlog（用于主从复制）<ul>
<li>索引文件（所有日志文件的顺序），<strong>日志文件</strong>（所有DDL、DML）</li>
</ul>
</li>
<li>redolog<ul>
<li>物理数据页的修改操作</li>
</ul>
</li>
</ul>
<h3 id="更新语句的两阶段提交"><a href="#更新语句的两阶段提交" class="headerlink" title="更新语句的两阶段提交"></a>更新语句的两阶段提交</h3><p>保证两个日志的逻辑一致</p>
<ul>
<li><p>流程</p>
<ul>
<li><p>写入redolog，并将状态修改为prepare</p>
</li>
<li><p>写入binlog</p>
</li>
<li><p>提交事务，并在redo log中设置为commit</p>
</li>
</ul>
</li>
</ul>
<h3 id="MySQL执行一条SQL语句的流程"><a href="#MySQL执行一条SQL语句的流程" class="headerlink" title="MySQL执行一条SQL语句的流程"></a>MySQL执行一条SQL语句的流程</h3><ul>
<li>连接器：开始处理这个请求</li>
<li>解析器：检查语句是否符合SQL语法规则</li>
<li>优化器：索引</li>
<li>执行器：通过具体的存储引擎，进行数据读写</li>
</ul>
<h3 id="定位慢SQL"><a href="#定位慢SQL" class="headerlink" title="定位慢SQL"></a>定位慢SQL</h3><ul>
<li>“SET GLOBAL slow_query_log”；mysqldumpslow去日志文件里找</li>
<li>Explain分析如何执行SQL语句的<ul>
<li>索引问题：possiable_keys（能用到的索引），key（实际用到的索引）</li>
<li>IO开销问题：rows（要遍历的行数），filtered（有效行数&#x2F;扫描行数比值）字段来查看</li>
</ul>
</li>
<li>优化<ul>
<li>避免不必要的列</li>
<li>索引优化<ul>
<li>覆盖索引（最左前缀原则，必须包含最左的）</li>
<li>适当使用前缀索引</li>
<li>避免使用&lt;&gt;</li>
</ul>
</li>
<li>分页优化<ul>
<li>延迟关联（先检索出需要的id）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="MySQL索引有哪些"><a href="#MySQL索引有哪些" class="headerlink" title="MySQL索引有哪些"></a>MySQL索引有哪些</h3><ul>
<li>主键（id），唯一索引（幂等id），普通索引</li>
<li>聚簇索引（主键，直接指向内存地址），非聚簇索引（普通索引，叶子节点存的主键ID，需要回表）</li>
</ul>
<h3 id="雪花算法"><a href="#雪花算法" class="headerlink" title="雪花算法"></a>雪花算法</h3><p>相比UUID64位更小，时间戳也有一定的连续性</p>
<p>分布式唯一ID（64位）hutool</p>
<ul>
<li>时间戳（41）</li>
<li>机器表示（workid，datacenter）（10）</li>
<li>自增序列（12）</li>
</ul>
<h3 id="MySQL加索引需要注意些什么"><a href="#MySQL加索引需要注意些什么" class="headerlink" title="MySQL加索引需要注意些什么"></a>MySQL加索引需要注意些什么</h3><ul>
<li>选择合适的列<ul>
<li>经常作为查询条件、排序条件、分组条件的列是建立索引的好候选（where，order by，group by）</li>
<li>频繁更新的不要建立索引</li>
<li>区分度低的（例如性别）</li>
</ul>
</li>
<li>避免过多的索引<ul>
<li>每个索引都需要占用额外的磁盘空间</li>
<li>更新，所有的索引都需要更新</li>
</ul>
</li>
<li>利用前缀索引和索引列的顺序</li>
</ul>
<h3 id="索引失效的情况"><a href="#索引失效的情况" class="headerlink" title="索引失效的情况"></a>索引失效的情况</h3><p>Where里函数，&lt;&gt;，最左匹配，or两边索引不一致</p>
<h3 id="MySQL为什么用B-树"><a href="#MySQL为什么用B-树" class="headerlink" title="MySQL为什么用B+树"></a>MySQL为什么用B+树</h3><ul>
<li>尽量减少读写次数（相比搜索树）</li>
<li>只在叶子节点存数据（相比B树会在每个节点存数据，那么能存的东西就少了）；叶子结点有序链表，范围查询更方便</li>
</ul>
<h3 id="MySQL有哪些锁"><a href="#MySQL有哪些锁" class="headerlink" title="MySQL有哪些锁"></a>MySQL有哪些锁</h3><ul>
<li>读写锁<ul>
<li>读锁：for share mode（读锁是能获取的）</li>
<li>写锁：for update mode（读写锁都不能获取）</li>
</ul>
</li>
<li>行锁，表锁<ul>
<li>行锁：记录锁，间隙锁、临键锁（用来坚决欢度）</li>
<li>表锁：意向锁</li>
</ul>
</li>
<li>乐观锁、悲观锁<ul>
<li>乐观锁：MVCC（冲突提交才检查）</li>
<li>悲观锁：for update</li>
</ul>
</li>
</ul>
<h3 id="MySQL事务的四个特性"><a href="#MySQL事务的四个特性" class="headerlink" title="MySQL事务的四个特性"></a>MySQL事务的四个特性</h3><ul>
<li><p>A（undo log）</p>
</li>
<li><p>D（redo log）</p>
</li>
<li><p>I（MVCC）</p>
</li>
<li><p>C</p>
</li>
</ul>
<h3 id="MySQL事务的隔离级别"><a href="#MySQL事务的隔离级别" class="headerlink" title="MySQL事务的隔离级别"></a>MySQL事务的隔离级别</h3><p>脏读（读取未提交的数据），不可重复读（另一个事务修改了值并提交，两次相同查询结果不同），幻读（另一个事务插入，发现多了一条数据）。</p>
<p>读未提交，读已提交（MVCC，每次读取生成一个readview），可重复读（MVCC，第一次读取的时候生成一个readview），串行化（加锁）。</p>
<h3 id="MySQL事务中MVCC的实现"><a href="#MySQL事务中MVCC的实现" class="headerlink" title="MySQL事务中MVCC的实现"></a>MySQL事务中MVCC的实现</h3><ul>
<li>版本链<ul>
<li>隐藏列：创建该版本的事务ID，undo指针</li>
</ul>
</li>
<li>ReadView<ul>
<li>作用：确定哪些版本的行记录是可见的</li>
<li>四个属性：创建该ReadView的事务id，活跃id列表，最小事务id，最大事务id</li>
<li>下面的情况是可见（也就是已经提交了）：比最小事务id小；在最小事务id和最大事务id之间且不在活跃id中</li>
</ul>
</li>
</ul>
<h3 id="分库分表"><a href="#分库分表" class="headerlink" title="分库分表"></a>分库分表</h3><p>单表单库数据量过大，连接数量过大，导致性能下降，做的一个负载均衡。</p>
<p><strong>水平分库分表</strong>（用户信息，发奖订单，积分订单，活动订单），垂直分库分表</p>
<h3 id="不停机扩容"><a href="#不停机扩容" class="headerlink" title="不停机扩容"></a>不停机扩容</h3><ol>
<li>在线双写，查询走旧库（进行数据的同步和校验）</li>
<li>在线双写，查询走新库</li>
<li>过一段时间，确定没有请求之后，就可以下线老库</li>
</ol>
<h3 id="Redis用来干嘛"><a href="#Redis用来干嘛" class="headerlink" title="Redis用来干嘛"></a>Redis用来干嘛</h3><ul>
<li>缓存<ul>
<li>String：各种东西，比如奖品，验证码</li>
<li>Hash：getMap，奖品概率查找表</li>
<li>List：所有的线程池信息</li>
</ul>
</li>
<li>阻塞队列+延时队列<ul>
<li>库存趋势更新到mysql，不稳定</li>
<li>阻塞队列（RBlockingQueue）：线程安全，在队列满或空时阻塞线程</li>
<li>延时队列（RDelayedQueue）：在一个延迟时间后，才会被放入RBlockingQueue</li>
</ul>
</li>
<li>分布式锁<ul>
<li>库存扣减，防止超卖</li>
</ul>
</li>
<li>发布，订阅<ul>
<li>线程池修改</li>
<li>发布：redissonClient.getTopic.pulish</li>
<li>订阅：redissonClient.getTopic.addListener</li>
</ul>
</li>
</ul>
<h3 id="阻塞队列和延时队列的实现"><a href="#阻塞队列和延时队列的实现" class="headerlink" title="阻塞队列和延时队列的实现"></a>阻塞队列和延时队列的实现</h3><p>阻塞队列：lpush，brpop（阻塞）</p>
<p>延时队列：zset，定期从zset中获取指定时间戳的</p>
<h3 id="Redis中的常用命令"><a href="#Redis中的常用命令" class="headerlink" title="Redis中的常用命令"></a>Redis中的常用命令</h3><ul>
<li>基本操作：set，get，decr</li>
<li>分布式锁：SetIfAbsent，tryLock</li>
<li>发布订阅：pulish，addListener</li>
<li>获取Hash或List：getMap，getblockingqueue，getDelayedQueue</li>
<li>其他：isExists，getLock</li>
</ul>
<h3 id="Redis为什么快"><a href="#Redis为什么快" class="headerlink" title="Redis为什么快"></a>Redis为什么快</h3><ul>
<li>基于内存的数据存储</li>
<li>单线程模型：避免了线程切换和锁竞争</li>
<li>IO多路复用<ul>
<li>select&#x2F;epoll机制，保证了单个线程能处理多个IO读写</li>
<li>将socket句柄注册进epoll，然后epoll帮你监听哪些socket上有消息到达</li>
<li>相比于read请求一直阻塞；只有epoll调用才会阻塞，收发客户消息是不会阻塞的</li>
</ul>
</li>
<li>高效的数据结构</li>
</ul>
<h3 id="Redis-的持久化方式？RDB-和-AOF-的区别？Redis-宕机哪种恢复的比较快？"><a href="#Redis-的持久化方式？RDB-和-AOF-的区别？Redis-宕机哪种恢复的比较快？" class="headerlink" title="Redis 的持久化方式？RDB 和 AOF 的区别？Redis 宕机哪种恢复的比较快？"></a>Redis 的持久化方式？RDB 和 AOF 的区别？Redis 宕机哪种恢复的比较快？</h3><p><strong>两个持久化方式</strong></p>
<ul>
<li>RDB（Redis DataBase）：异步创建数据集的快照，不会阻塞<ul>
<li>bgsava</li>
<li>redis.conf中配置命令，发生多少次变更，多少秒后触发一次RDB</li>
</ul>
</li>
<li>AOF（Append only file）：追加每个写操作到AOF文件中<ul>
<li>流程1:将所有写命令追加到AOF buffer中</li>
<li>流程2:持久化sync<ul>
<li>每条写指令&#x2F;每秒&#x2F;只在Redis关闭时执行</li>
</ul>
</li>
<li>流程3:重写<ul>
<li>直接将Redis重写成一系列写命令</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>两者区别</strong></p>
<p>RDB，文件小，对性能影响较小，但是容易造成数据丢失（性能是首要指标）</p>
<p>AOF，文件大，实时性好，对性能影响较大（尽可能减少数据丢失）</p>
<p>混合持久化：在AOF重写的同时，生成一份RDB快照，这份快照作为AOF文件的一部分，最后再附加新的写入命令。</p>
<h3 id="什么是缓存击穿、缓存穿透、缓存雪崩"><a href="#什么是缓存击穿、缓存穿透、缓存雪崩" class="headerlink" title="什么是缓存击穿、缓存穿透、缓存雪崩"></a>什么是缓存击穿、缓存穿透、缓存雪崩</h3><p><strong>缓存击穿</strong></p>
<p>热点数据在过期的那一刻，直达数据库。</p>
<p>解决方案</p>
<ul>
<li><p>发现缓存中没有，对A这个数据加锁，拿到缓存再返回给用户</p>
</li>
<li><p>不断刷新过期时间</p>
</li>
</ul>
<p><strong>缓存穿透</strong></p>
<p>查询根本不存在的数据，那么也会直达数据库</p>
<p>解决方案</p>
<ul>
<li>哪怕不存在的数据，也缓存空值（适用数据缺失较少场景，有数据不一致的风险）<ul>
<li>需要设置较短的过期时间</li>
</ul>
</li>
<li>加一个布隆过滤器（适用海量数据的场景）<ul>
<li>告诉我们key一定不存在或者可能存在</li>
<li>也就是多个hash映射，只要有一个为0，就说明不存在</li>
</ul>
</li>
</ul>
<p><strong>缓存雪崩</strong></p>
<p>缓存大量过期，或者缓存服务器宕机</p>
<p>解决方案</p>
<ul>
<li>集群部署</li>
<li>使用多级缓存（Redis不可用了，也可以用本地缓存）</li>
<li>设置不同的过期时间</li>
</ul>
<h3 id="如何保证数据的一致性"><a href="#如何保证数据的一致性" class="headerlink" title="如何保证数据的一致性"></a>如何保证数据的一致性</h3><p> 先写MySQL，再删除Redis。只会有一次不一致的情况，对于不是强一致性的业务，可以容忍。</p>
<ul>
<li>为什么删除缓存：删除缓存比更新缓存快的多</li>
<li>为什么先更数据库：MySQL的IO慢的多，容易在Redis中产生脏数据</li>
</ul>
<p>假如对一致性要求很高呢（缓存删除失败，并发导致写入了脏数据）</p>
<ul>
<li>引入消息队列保证缓存被删除</li>
<li>设置缓存过期时间兜底</li>
</ul>
<h3 id="怎么处理Redis中的热Key和大Key"><a href="#怎么处理Redis中的热Key和大Key" class="headerlink" title="怎么处理Redis中的热Key和大Key"></a>怎么处理Redis中的热Key和大Key</h3><p>QPS集中在特定的Key，那么就是热Key。</p>
<p>如何处理</p>
<ul>
<li>把Key打到不同的Redis实例</li>
<li>二级缓存</li>
</ul>
<h3 id="Redis主从复制，哨兵，集群"><a href="#Redis主从复制，哨兵，集群" class="headerlink" title="Redis主从复制，哨兵，集群"></a>Redis主从复制，哨兵，集群</h3><p>高可用：主从复制（手动切换），哨兵（自动切换，哨兵节点，选举一个负责故障转移）</p>
<p>数据分区：集群（哈希槽，keys映射到实例）</p>
<h3 id="消息队列的三个好处"><a href="#消息队列的三个好处" class="headerlink" title="消息队列的三个好处"></a>消息队列的三个好处</h3><p><strong>异步处理，减少响应时间（以发奖为例）</strong></p>
<p>请求在写入消息队列就立即返回给用户了</p>
<p><strong>削峰，限流（以发奖为例）</strong></p>
<p>把要做的事务存储在消息队列中（压力转嫁到MQ），然后后端再慢慢根据自己的能力去消费这些消息，避免直接把后端服务打掉。</p>
<p><strong>解耦</strong></p>
<p>新增业务，只要对该类消息感兴趣，只需订阅该消息</p>
<h3 id="为什么选择Kafka（send，KafkaListener）"><a href="#为什么选择Kafka（send，KafkaListener）" class="headerlink" title="为什么选择Kafka（send，KafkaListener）"></a>为什么选择Kafka（send，KafkaListener）</h3><p>极致的性能，超高吞吐量（百万级）；可以实现高可用，可以做到0消息丢失的情况；生态系统的兼容性非常好</p>
<p>缺点，<strong>消息重复消费</strong>，造成轻微的影响。</p>
<h3 id="保证Kafka的消费顺序"><a href="#保证Kafka的消费顺序" class="headerlink" title="保证Kafka的消费顺序"></a>保证Kafka的消费顺序</h3><p>Kafka一个topic里包含多个partition，只保证partition分区中的消息有序。所以send的时候指定分区（或者使用对象id作为key）。</p>
<h3 id="保证Kafka的消息不丢失"><a href="#保证Kafka的消息不丢失" class="headerlink" title="保证Kafka的消息不丢失"></a>保证Kafka的消息不丢失</h3><p><strong>生产者丢失消息</strong></p>
<ol>
<li>send函数的返回值是ListenableFuture，添加回调函数，判定消息结果。</li>
<li>设置重试次数稍微大一点</li>
<li>将消息发送之前，写入task表，如果发送失败，定时任务去补偿。</li>
</ol>
<p><strong>消费者丢失消息</strong></p>
<p>偏移量，当消费者自动提交了偏移量，但是还没消费就挂掉了。改成手动提交偏移量。</p>
<p><strong>Kafka丢失消息</strong></p>
<p>Kafka挂掉，多副本机制，但消息还没有同步。</p>
<p>使用acks&#x3D;all，最安全的，但是延迟会很高</p>
<h3 id="Kafka如何保证消息不重复消费"><a href="#Kafka如何保证消息不重复消费" class="headerlink" title="Kafka如何保证消息不重复消费"></a>Kafka如何保证消息不重复消费</h3><ul>
<li>mysql幂等校验</li>
<li>最根本的原因，已经消费的数据没有成功提交offset，拉取到消息再提交</li>
</ul>
<h3 id="网络模型"><a href="#网络模型" class="headerlink" title="网络模型"></a>网络模型</h3><p>应用层：HTTP、DNS（应用把应用数据传给下一层）</p>
<p>传输层：TCP、UDP</p>
<p>网络层：MAC</p>
<p>网络接口层</p>
<h3 id="输入HTTP流程"><a href="#输入HTTP流程" class="headerlink" title="输入HTTP流程"></a>输入HTTP流程</h3><ol>
<li>HTTP get&#x2F;post</li>
<li>DNS查询IP地址（根，顶级，权威）</li>
<li>TCP三次握手</li>
<li>ARP，获取MAC地址（广播，ARP缓存）</li>
</ol>
<h3 id="说说DNS的解析过程"><a href="#说说DNS的解析过程" class="headerlink" title="说说DNS的解析过程"></a>说说DNS的解析过程</h3><p>查看本地服务器的缓存，不然就走根服务器、顶级服务器、权限域名</p>
<h3 id="HTTP1-0-1-1-2-0-3-0"><a href="#HTTP1-0-1-1-2-0-3-0" class="headerlink" title="HTTP1.0  1.1  2.0 3.0"></a>HTTP1.0  1.1  2.0 3.0</h3><p>短链接，长链接，多路复用，快速UDP链接</p>
<h3 id="HTTP和HTTPS"><a href="#HTTP和HTTPS" class="headerlink" title="HTTP和HTTPS"></a>HTTP和HTTPS</h3><p>加了SSL&#x2F;TLS协议（非对称加密）</p>
<ul>
<li>非对称加密：服务端向客户端发送数字证书公钥，生成会话密钥</li>
<li>双方用会话密钥加密通话内容</li>
</ul>
<h3 id="TCP三次握手，四次挥手"><a href="#TCP三次握手，四次挥手" class="headerlink" title="TCP三次握手，四次挥手"></a>TCP三次握手，四次挥手</h3><p>SYN（Synchronize，连接请求），seq（序列号），ack（应答）</p>
<p>FIN（finish请求），多了一次等待数据完成，2MSL</p>
<h3 id="堆和栈"><a href="#堆和栈" class="headerlink" title="堆和栈"></a>堆和栈</h3><p>线程：栈帧（局部变量，返回）</p>
<p>堆：类，字符串常量</p>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3>
    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%BC%80%E5%8F%91/" rel="tag"># 开发</a>
              <a href="/tags/%E5%85%AB%E8%82%A1/" rel="tag"># 八股</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/03/31/kaifa/bagu/JWT%E8%BF%98%E6%98%AFcookie/" rel="prev" title="【1开发】【八股】JWT">
                  <i class="fa fa-angle-left"></i> 【1开发】【八股】JWT
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/03/31/kaifa/mianjing/mianjing/" rel="next" title="【1开发】【八股】面经">
                  【1开发】【八股】面经 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2022 - 2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">蔡正海</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  



  <script src="/js/third-party/fancybox.js"></script>



  





</body>
</html>
